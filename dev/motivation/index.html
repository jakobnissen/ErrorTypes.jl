<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Why use ErrorTypes? · ErrorTypes.jl</title><meta name="title" content="Why use ErrorTypes? · ErrorTypes.jl"/><meta property="og:title" content="Why use ErrorTypes? · ErrorTypes.jl"/><meta property="twitter:title" content="Why use ErrorTypes? · ErrorTypes.jl"/><meta name="description" content="Documentation for ErrorTypes.jl."/><meta property="og:description" content="Documentation for ErrorTypes.jl."/><meta property="twitter:description" content="Documentation for ErrorTypes.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">ErrorTypes.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li class="is-active"><a class="tocitem" href>Why use ErrorTypes?</a><ul class="internal"><li><a class="tocitem" href="#An-illustrative-example"><span>An illustrative example</span></a></li><li><a class="tocitem" href="#Why-would-you-NOT-use-ErrorTypes?"><span>Why would you NOT use ErrorTypes?</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Why use ErrorTypes?</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Why use ErrorTypes?</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/jakobnissen/ErrorTypes.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/jakobnissen/ErrorTypes.jl/blob/master/docs/src/motivation.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Why-use-ErrorTypes?"><a class="docs-heading-anchor" href="#Why-use-ErrorTypes?">Why use ErrorTypes?</a><a id="Why-use-ErrorTypes?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-use-ErrorTypes?" title="Permalink"></a></h1><p>In short, ErrorTypes improves the <em>safety</em> of your error-handling code by reducing the opportunities for <em>human error</em>.</p><p>Some people think the source of programming bug are programs who misbehave by not computing what they are supposed to. This is false. Bugs arise from <em>human</em> failure. We humans fail to understand the programs we write. We forget the edge cases. We create leaky abstractions. We don&#39;t document thoroughly.</p><p>If we want better programs, it is pointless to wait around for better humans to arrive. We can&#39;t excuse the existence of bugs with the existence human fallibility, because we will never get rid of that. Instead, we must design systems to contain and mitigate human error. Programming languages are such systems.</p><p>One source of such error is <em>fallible functions</em>. Some functions are naturally fallible. Consider, for example, the <code>maximum</code> function from Julia&#39;s Base. This function will fail on empty collections. With an edge case like this, some human is bound to forget it at some point, and produce fragile software as a result. The behaviour of <code>maximum</code> is a bug waiting to happen.</p><p>However, because we <em>know</em> there is a potential bug hiding here, we have the ability to act. We can use our programming language to <em>force</em> us to remember the edge case. We can, for example, encode the edge case into the type system such that any code that forgets the edge case simply won&#39;t compile.</p><h2 id="An-illustrative-example"><a class="docs-heading-anchor" href="#An-illustrative-example">An illustrative example</a><a id="An-illustrative-example-1"></a><a class="docs-heading-anchor-permalink" href="#An-illustrative-example" title="Permalink"></a></h2><p>Suppose you&#39;re building an important package that includes some text processing. At some point, you need a function that gets the length of the first word (in bytes) of some text. So, you write up the following:</p><pre><code class="language-julia hljs">function first_word_bytes(s::Union{String, SubString{String}})
    findfirst(isspace, lstrip(s)) - 1
end</code></pre><p>Easy, fast, flexible, relatively generic. You also write a couple of tests to handle the edge cases:</p><pre><code class="language-julia hljs">@test first_word_bytes(&quot;Lorem ipsum&quot;) == 5
@test first_word_bytes(&quot; dolor sit amet&quot;) == 5 # leading whitespace
@test first_word_bytes(&quot;Rødgrød med fløde&quot;) == 9 # Unicode</code></pre><p>All tests pass, and you push to production. But alas! Your code has a horrible bug that causes your production server to crash! See, you forgot an edge case:</p><pre><code class="language-julia hljs">julia&gt; first_word_bytes(&quot;boo!&quot;)
ERROR: MethodError: no method matching -(::Nothing, ::Int64)</code></pre><p>The infuriating part is that the Julia compiler is in on the plot against you: It <em>knew</em> that <code>findfirst</code> returned a <code>Union{Int, Nothing}</code>, not an <code>Int</code> as you assumed it did. It just decided to not share that information, leading you into a hidden trap.</p><p>We can do better. With this package, you can specify the return type of any function that can possibly fail. Here, we will encode it as an <code>Option{Int}</code>:</p><pre><code class="language-julia hljs">using ErrorTypes

function safer_findfirst(f, x)::Option{eltype(keys(x))}
    for (k, v) in pairs(x)
        f(v) &amp;&amp; return some(k) # some: value
    end
    none # none: absence of value
end</code></pre><p>Now, if you forget that <code>safer_findfirst</code> can error, and mistakenly assume that it always return an <code>Int</code>, your <code>first_word_bytes</code> will error in <em>all</em> cases, because almost no operation are permitted on <code>Option</code> objects.</p><h2 id="Why-would-you-NOT-use-ErrorTypes?"><a class="docs-heading-anchor" href="#Why-would-you-NOT-use-ErrorTypes?">Why would you NOT use ErrorTypes?</a><a id="Why-would-you-NOT-use-ErrorTypes?-1"></a><a class="docs-heading-anchor-permalink" href="#Why-would-you-NOT-use-ErrorTypes?" title="Permalink"></a></h2><p>Using ErrorTypes, or packages like it, provides a small but constant <em>friction</em> in your code. It will increase the burden of maintenance.</p><p>You will be constantly wrapping and unwrapping return values, and you now have to annotate function&#39;s return values. Refactoring code becomes a larger job, because these large, clunky type signatures all have to be changed. You will make mistakes with your return signatures and type conversions, which will slow down deveopment. Furthermore, you (intentionally) place retrictions on the input and output types of your functions, which, depending on the function&#39;s design, can limit its uses.</p><p>So, use of this package comes down to how much developing time you are willing to pay for building more reliable software. Sometimes, it&#39;s not worth it.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../usage/">« Usage</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.11.4 on <span class="colophon-date" title="Friday 23 May 2025 08:28">Friday 23 May 2025</span>. Using Julia version 1.11.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
